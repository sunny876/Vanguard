{"ast":null,"code":"import{VuiSpacer,VuiTitle,VuiHorizontalRule,VuiSummary}from\"../ui\";import{sanitizeCitations,reorderCitations,applyCitationOrder}from\"../ui/utils/citations\";import{useSearchContext}from\"../contexts/SearchContext\";import{SearchResultList}from\"./results/SearchResultList\";import{ProgressReport}from\"./progressReport/ProgressReport\";import{SummaryCitation}from\"./summary/SummaryCitation\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export const SummaryUx=()=>{const{isSearching,searchResults,isSummarizing,summarizationResponse,searchResultsRef,selectedSearchResultPosition}=useSearchContext();const rawSummary=summarizationResponse;const unorderedSummary=sanitizeCitations(rawSummary);let summary=\"\";let summarySearchResults=[];if(unorderedSummary){summary=reorderCitations(unorderedSummary);if(searchResults){summarySearchResults=applyCitationOrder(searchResults,unorderedSummary);}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ProgressReport,{isSearching:isSearching,isSummarizing:isSummarizing}),summary&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(VuiSpacer,{size:\"l\"}),/*#__PURE__*/_jsx(VuiTitle,{size:\"xs\",children:/*#__PURE__*/_jsx(\"h2\",{style:{display:\"flex\",alignItems:\"center\"},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Summary\"})})}),/*#__PURE__*/_jsx(VuiSpacer,{size:\"s\"}),/*#__PURE__*/_jsx(VuiSummary,{summary:summary,SummaryCitation:SummaryCitation}),/*#__PURE__*/_jsx(VuiSpacer,{size:\"s\"}),/*#__PURE__*/_jsx(VuiSpacer,{size:\"l\"}),/*#__PURE__*/_jsx(VuiHorizontalRule,{}),/*#__PURE__*/_jsx(VuiSpacer,{size:\"l\"}),summarySearchResults.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(VuiTitle,{size:\"xs\",children:/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"References\"})})}),/*#__PURE__*/_jsx(VuiSpacer,{size:\"s\"}),/*#__PURE__*/_jsx(SearchResultList,{results:summarySearchResults,selectedSearchResultPosition:selectedSearchResultPosition,setSearchResultRef:(el,index)=>searchResultsRef.current[index]=el})]})]})]});};","map":{"version":3,"names":["VuiSpacer","VuiTitle","VuiHorizontalRule","VuiSummary","sanitizeCitations","reorderCitations","applyCitationOrder","useSearchContext","SearchResultList","ProgressReport","SummaryCitation","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SummaryUx","isSearching","searchResults","isSummarizing","summarizationResponse","searchResultsRef","selectedSearchResultPosition","rawSummary","unorderedSummary","summary","summarySearchResults","children","size","style","display","alignItems","length","results","setSearchResultRef","el","index","current"],"sources":["/Users/syedali/POC/Create UI Threadneedle/columbia-threadneedle-demo/src/view/SummaryUx.tsx"],"sourcesContent":["import { VuiSpacer, VuiTitle, VuiHorizontalRule, VuiSummary } from \"../ui\";\nimport { sanitizeCitations, reorderCitations, applyCitationOrder } from \"../ui/utils/citations\";\nimport { useSearchContext } from \"../contexts/SearchContext\";\nimport { SearchResultList } from \"./results/SearchResultList\";\nimport { ProgressReport } from \"./progressReport/ProgressReport\";\nimport { SummaryCitation } from \"./summary/SummaryCitation\";\nimport { SearchResultWithSnippet } from \"./types\";\n\nexport const SummaryUx = () => {\n  const {\n    isSearching,\n    searchResults,\n    isSummarizing,\n    summarizationResponse,\n    searchResultsRef,\n    selectedSearchResultPosition\n  } = useSearchContext();\n\n  const rawSummary = summarizationResponse;\n  const unorderedSummary = sanitizeCitations(rawSummary);\n\n  let summary = \"\";\n  let summarySearchResults: SearchResultWithSnippet[] = [];\n\n  if (unorderedSummary) {\n    summary = reorderCitations(unorderedSummary);\n    if (searchResults) {\n      summarySearchResults = applyCitationOrder(searchResults, unorderedSummary);\n    }\n  }\n\n  return (\n    <>\n      <ProgressReport isSearching={isSearching} isSummarizing={isSummarizing} />\n\n      {summary && (\n        <>\n          <VuiSpacer size=\"l\" />\n\n          <VuiTitle size=\"xs\">\n            <h2 style={{ display: \"flex\", alignItems: \"center\" }}>\n              <strong>Summary</strong>\n            </h2>\n          </VuiTitle>\n\n          <VuiSpacer size=\"s\" />\n\n          <VuiSummary summary={summary} SummaryCitation={SummaryCitation} />\n\n          <VuiSpacer size=\"s\" />\n\n          <VuiSpacer size=\"l\" />\n          <VuiHorizontalRule />\n          <VuiSpacer size=\"l\" />\n\n          {summarySearchResults.length > 0 && (\n            <>\n              <VuiTitle size=\"xs\">\n                <h2>\n                  <strong>References</strong>\n                </h2>\n              </VuiTitle>\n\n              <VuiSpacer size=\"s\" />\n\n              <SearchResultList\n                results={summarySearchResults}\n                selectedSearchResultPosition={selectedSearchResultPosition}\n                setSearchResultRef={(el: HTMLDivElement | null, index: number) =>\n                  (searchResultsRef.current[index] = el)\n                }\n              />\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}