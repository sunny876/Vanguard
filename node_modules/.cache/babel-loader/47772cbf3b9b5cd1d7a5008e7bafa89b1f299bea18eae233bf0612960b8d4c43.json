{"ast":null,"code":"\"use strict\";\n\nvar U = Object.defineProperty;\nvar K = Object.getOwnPropertyDescriptor;\nvar $ = Object.getOwnPropertyNames;\nvar V = Object.prototype.hasOwnProperty;\nvar J = (e, t) => {\n    for (var s in t) U(e, s, {\n      get: t[s],\n      enumerable: !0\n    });\n  },\n  j = (e, t, s, r) => {\n    if (t && typeof t == \"object\" || typeof t == \"function\") for (let n of $(t)) !V.call(e, n) && n !== s && U(e, n, {\n      get: () => t[n],\n      enumerable: !(r = K(t, n)) || r.enumerable\n    });\n    return e;\n  };\nvar W = e => j(U({}, \"__esModule\", {\n  value: !0\n}), e);\nvar ie = {};\nJ(ie, {\n  ApiV1: () => O,\n  ApiV2: () => F,\n  streamQueryV1: () => M,\n  streamQueryV2: () => z\n});\nmodule.exports = W(ie);\nvar O = {};\nvar F = {};\nvar A = \"%START_SNIPPET%\",\n  w = \"%END_SNIPPET%\";\nvar H = e => {\n    if (!e) return;\n    let t = [],\n      {\n        response: s,\n        document: r\n      } = e;\n    return s.forEach(n => {\n      let {\n          documentIndex: u,\n          text: m\n        } = n,\n        {\n          pre: f,\n          post: y,\n          text: l\n        } = Y(m),\n        h = r[Number(u)],\n        {\n          id: v,\n          metadata: x\n        } = h,\n        {\n          source: E,\n          url: b,\n          title: a,\n          metadata: I\n        } = X(x);\n      t.push({\n        id: v,\n        snippet: {\n          pre: f,\n          text: l,\n          post: y\n        },\n        source: E,\n        url: b,\n        title: a,\n        metadata: I\n      });\n    }), t;\n  },\n  X = e => {\n    let t = Z(e);\n    return {\n      source: t.source,\n      url: t.url,\n      title: t.title || \"Untitled\",\n      metadata: t\n    };\n  },\n  Y = e => {\n    let [t, s] = e.indexOf(A) !== -1 ? e.split(A) : [\"\", e],\n      [r, n] = s.indexOf(w) !== -1 ? s.split(w) : [s, \"\"];\n    return {\n      pre: t,\n      post: n,\n      text: r\n    };\n  },\n  Z = e => {\n    let t = {};\n    return e.forEach(s => {\n      t[s.name] = s.value;\n    }), t;\n  };\nvar L = (e, t) => {\n  e.split(`\n`).filter(r => r !== \"\").forEach(t);\n};\nvar D = \"https://api.vectara.io\";\nvar N = async (e, t, s) => {\n  let r = new AbortController(),\n    n = await fetch(s, {\n      method: \"POST\",\n      headers: e,\n      body: t,\n      signal: r.signal\n    });\n  if (!n.ok) throw new Error(`Request failed (${n.statusText})`, {\n    cause: n.status\n  });\n  if (!n.body) throw new Error(\"Response body does not exist\");\n  return {\n    stream: ee(n.body),\n    cancelStream: () => r.abort(),\n    status: n.status,\n    responseHeaders: n.headers\n  };\n};\nasync function* ee(e) {\n  let t = e.getReader(),\n    s = new TextDecoder();\n  for (;;) {\n    let {\n      value: r,\n      done: n\n    } = await t.read();\n    if (n) break;\n    yield s.decode(r, {\n      stream: !0\n    });\n  }\n}\nvar M = async (e, t) => {\n    var h, v, x, E, b, a, I, C;\n    let s = {\n        \"x-api-key\": e.apiKey,\n        \"customer-id\": e.customerId,\n        \"Content-Type\": \"application/json\"\n      },\n      r = (h = e.lambda) != null ? h : .025;\n    r > 1 ? r = 1 : r < 0 && (r = 0);\n    let n = e.corpusIds.map(p => ({\n        customerId: e.customerId,\n        corpusId: p,\n        lexicalInterpolationConfig: {\n          lambda: r\n        },\n        metadataFilter: e.filter ? `doc.source = '${e.filter}'` : void 0\n      })),\n      u = e.rerank ? {\n        rerankingConfig: {\n          rerankerId: e.rerankerId,\n          ...(e.rerankerId === 272725718 ? {\n            mmrConfig: {\n              diversityBias: e.rerankDiversityBias\n            }\n          } : {})\n        }\n      } : {},\n      m = JSON.stringify({\n        query: [{\n          query: e.queryValue,\n          start: 0,\n          numResults: e.rerank ? e.rerankNumResults : 10,\n          corpusKey: n,\n          contextConfig: {\n            sentencesBefore: (v = e.summaryNumSentences) != null ? v : 2,\n            sentencesAfter: (x = e.summaryNumSentences) != null ? x : 2,\n            startTag: A,\n            endTag: w\n          },\n          summary: [{\n            responseLang: e.language,\n            debug: e.debug,\n            maxSummarizedResults: e.summaryNumResults,\n            summarizerPromptName: e.summaryPromptName,\n            factualConsistencyScore: (E = e.enableFactualConsistencyScore) != null ? E : !1,\n            chat: {\n              store: (a = (b = e.chat) == null ? void 0 : b.store) != null ? a : !1,\n              conversationId: (I = e.chat) == null ? void 0 : I.conversationId\n            }\n          }],\n          ...u\n        }]\n      }),\n      f = (C = e.endpoint) != null ? C : `${D}/v1/stream-query`,\n      {\n        stream: y\n      } = await N(s, m, f),\n      l = \"\";\n    for await (let p of y) try {\n      L(p, g => {\n        var S, R, P;\n        let o = JSON.parse(g);\n        if (!o.result) return;\n        let d = {},\n          T = te(e, o.result);\n        T && (d.summary = T);\n        let k = re(e, o.result);\n        k && (d.chat = k);\n        let c = se(o.result);\n        c && (d.factualConsistency = c);\n        let _ = {\n          references: H(o.result.responseSet),\n          details: d,\n          updatedText: ne(o.result, l),\n          isDone: (R = (S = o.result.summary) == null ? void 0 : S.done) != null ? R : !1\n        };\n        l = (P = _.updatedText) != null ? P : \"\", t(_);\n      });\n    } catch (g) {\n      console.log(g);\n    }\n  },\n  te = (e, t) => {\n    if (t.summary && e.debug && t.summary.prompt) return {\n      prompt: t.summary.prompt\n    };\n  },\n  re = (e, t) => {\n    var r;\n    if (!((r = t.summary) != null && r.chat)) return;\n    let s = {\n      conversationId: t.summary.chat.conversationId,\n      turnId: t.summary.chat.turnId\n    };\n    return e.debug && t.summary.chat.rephrasedQuery && (s.rephrasedQuery = t.summary.chat.rephrasedQuery), s;\n  },\n  se = e => {\n    if (!(!e.summary || !e.summary.factualConsistency)) return {\n      score: e.summary.factualConsistency.score\n    };\n  },\n  ne = (e, t) => {\n    if (e.summary) return `${t}${e.summary.text}`;\n  };\nvar Q = class {\n  constructor(t, s = !1, r = 200) {\n    this.eventInProgress = \"\";\n    this.updatedText = \"\";\n    this.events = [], this.onStreamEvent = t, this.includeRaw = s, this.status = r;\n  }\n  consumeChunk(t) {\n    t.split(`\n`).forEach(r => {\n      if (r.trim().length !== 0 && r.indexOf(\"event:\") !== 0) {\n        r.indexOf(\"data:\") === 0 ? this.eventInProgress = r.slice(5, r.length) : this.eventInProgress += r;\n        try {\n          let n = JSON.parse(this.eventInProgress);\n          this.enqueueEvent(n), this.eventInProgress = \"\";\n        } catch (n) {\n          n.stack.includes(\"at JSON.parse\") || console.error(n);\n        }\n      }\n    }), this.drainEvents();\n  }\n  enqueueEvent(t) {\n    let {\n      type: s,\n      messages: r,\n      search_results: n,\n      chat_id: u,\n      turn_id: m,\n      factual_consistency_score: f,\n      generation_chunk: y,\n      rendered_prompt: l,\n      rephrased_query: h\n    } = t;\n    switch (s) {\n      case \"error\":\n        this.events.push({\n          type: \"error\",\n          messages: r,\n          ...(this.includeRaw && {\n            raw: t\n          })\n        });\n        break;\n      case \"search_results\":\n        this.events.push({\n          type: \"searchResults\",\n          searchResults: n,\n          ...(this.includeRaw && {\n            raw: t\n          })\n        });\n        break;\n      case \"chat_info\":\n        this.events.push({\n          type: \"chatInfo\",\n          chatId: u,\n          turnId: m,\n          ...(this.includeRaw && {\n            raw: t\n          })\n        });\n        break;\n      case \"generation_chunk\":\n        this.updatedText += y, this.events.push({\n          type: \"generationChunk\",\n          updatedText: this.updatedText,\n          generationChunk: y,\n          ...(this.includeRaw && {\n            raw: t\n          })\n        });\n        break;\n      case \"generation_info\":\n        this.events.push({\n          type: \"generationInfo\",\n          renderedPrompt: l,\n          rephrasedQuery: h,\n          ...(this.includeRaw && {\n            raw: t\n          })\n        });\n        break;\n      case \"generation_end\":\n        this.events.push({\n          type: \"generationEnd\",\n          ...(this.includeRaw && {\n            raw: t\n          })\n        });\n        break;\n      case \"factual_consistency_score\":\n        this.events.push({\n          type: \"factualConsistencyScore\",\n          factualConsistencyScore: f,\n          ...(this.includeRaw && {\n            raw: t\n          })\n        });\n        break;\n      case \"end\":\n        this.events.push({\n          type: \"end\",\n          ...(this.includeRaw && {\n            raw: t\n          })\n        });\n        break;\n      default:\n        s ? this.events.push({\n          type: \"unexpectedEvent\",\n          rawType: s,\n          raw: t\n        }) : this.status !== 200 ? this.events.push({\n          type: \"requestError\",\n          status: this.status,\n          raw: t\n        }) : this.events.push({\n          type: \"unexpectedError\",\n          raw: t\n        });\n    }\n  }\n  drainEvents() {\n    this.events.forEach(t => {\n      this.onStreamEvent(t);\n    }), this.events = [];\n  }\n};\nvar ae = e => {\n    if (e) {\n      if (e.type === \"none\") return {\n        type: e.type\n      };\n      if (e.type === \"customer_reranker\") return {\n        type: e.type,\n        reranker_id: e.rerankerId\n      };\n      if (e.type === \"mmr\") return {\n        type: e.type,\n        diversity_bias: e.diversityBias\n      };\n    }\n  },\n  oe = e => {\n    if (e) {\n      if (e.style === \"none\" || e.style === \"numeric\") return {\n        style: e.style\n      };\n      if (e.style === \"html\" || e.style === \"markdown\") return {\n        style: e.style,\n        url_pattern: e.urlPattern,\n        text_pattern: e.textPattern\n      };\n    }\n  },\n  z = async ({\n    streamQueryConfig: e,\n    onStreamEvent: t,\n    includeRawEvents: s = !1\n  }) => {\n    let {\n        customerId: r,\n        apiKey: n,\n        authToken: u,\n        domain: m,\n        corpusKey: f,\n        query: y,\n        search: {\n          metadataFilter: l,\n          lexicalInterpolation: h,\n          customDimensions: v,\n          semantics: x,\n          offset: E,\n          limit: b,\n          contextConfiguration: a,\n          reranker: I\n        },\n        generation: C,\n        chat: p\n      } = e,\n      g = {\n        query: y,\n        search: {\n          corpora: f.split(\",\").map(c => ({\n            corpus_key: c,\n            metadata_filter: l,\n            lexical_interpolation: h,\n            custom_dimensions: v,\n            semantics: x\n          })),\n          offset: E,\n          limit: b,\n          context_configuration: {\n            characters_before: a == null ? void 0 : a.charactersBefore,\n            characters_after: a == null ? void 0 : a.charactersAfter,\n            sentences_before: a == null ? void 0 : a.sentencesBefore,\n            sentences_after: a == null ? void 0 : a.sentencesAfter,\n            start_tag: a == null ? void 0 : a.startTag,\n            end_tag: a == null ? void 0 : a.endTag\n          },\n          reranker: ae(I)\n        },\n        stream_response: !0\n      };\n    if (C) {\n      let {\n        promptName: c,\n        maxUsedSearchResults: _,\n        promptText: S,\n        maxResponseCharacters: R,\n        responseLanguage: P,\n        modelParameters: i,\n        citations: q,\n        enableFactualConsistencyScore: B\n      } = C;\n      g.generation = {\n        prompt_name: c,\n        max_used_search_results: _,\n        prompt_text: S,\n        max_response_characters: R,\n        response_language: P,\n        model_parameters: i && {\n          max_tokens: i.maxTokens,\n          temperature: i.temperature,\n          frequency_penalty: i.frequencyPenalty,\n          presence_penalty: i.presencePenalty\n        },\n        citations: oe(q),\n        enable_factual_consistency_score: B\n      };\n    }\n    p && (g.chat = {\n      store: p.store\n    });\n    let o;\n    p ? p.conversationId ? o = `/v2/chats/${p.conversationId}/turns` : o = \"/v2/chats\" : o = \"/v2/query\";\n    let d = {\n      \"customer-id\": r,\n      \"Content-Type\": \"application/json\"\n    };\n    n && (d[\"x-api-key\"] = n), u && (d.Authorization = `Bearer ${u}`);\n    let T = `${m != null ? m : D}${o}`,\n      k = {\n        method: \"POST\",\n        url: T,\n        headers: d,\n        body: g\n      };\n    try {\n      let {\n        cancelStream: c,\n        stream: _,\n        status: S,\n        responseHeaders: R\n      } = await N(d, JSON.stringify(g), T);\n      return (async () => {\n        try {\n          let i = new Q(t, s, S);\n          for await (let q of _) try {\n            i.consumeChunk(q);\n          } catch (B) {\n            G(B, t);\n          }\n        } catch (i) {\n          i instanceof DOMException && i.name == \"AbortError\" || G(i, t);\n        }\n      })(), {\n        cancelStream: c,\n        request: k,\n        status: S,\n        responseHeaders: R\n      };\n    } catch (c) {\n      G(c, t);\n    }\n    return {\n      request: k\n    };\n  },\n  G = (e, t) => {\n    if (e instanceof Error) t({\n      type: \"genericError\",\n      error: e\n    });else throw e;\n  };","map":{"version":3,"names":["U","Object","defineProperty","K","getOwnPropertyDescriptor","$","getOwnPropertyNames","V","prototype","hasOwnProperty","J","e","t","s","get","enumerable","j","r","n","call","W","value","ie","ApiV1","O","ApiV2","F","streamQueryV1","M","streamQueryV2","z","module","exports","A","w","H","response","document","forEach","documentIndex","u","text","m","pre","f","post","y","l","Y","h","Number","id","v","metadata","x","source","E","url","b","title","a","I","X","push","snippet","Z","indexOf","split","name","L","filter","D","N","AbortController","fetch","method","headers","body","signal","ok","Error","statusText","cause","status","stream","ee","cancelStream","abort","responseHeaders","getReader","TextDecoder","done","read","decode","C","apiKey","customerId","lambda","corpusIds","map","p","corpusId","lexicalInterpolationConfig","metadataFilter","rerank","rerankingConfig","rerankerId","mmrConfig","diversityBias","rerankDiversityBias","JSON","stringify","query","queryValue","start","numResults","rerankNumResults","corpusKey","contextConfig","sentencesBefore","summaryNumSentences","sentencesAfter","startTag","endTag","summary","responseLang","language","debug","maxSummarizedResults","summaryNumResults","summarizerPromptName","summaryPromptName","factualConsistencyScore","enableFactualConsistencyScore","chat","store","conversationId","endpoint","g","S","R","P","o","parse","result","d","T","te","k","re","c","se","factualConsistency","_","references","responseSet","details","updatedText","ne","isDone","console","log","prompt","turnId","rephrasedQuery","score","Q","constructor","eventInProgress","events","onStreamEvent","includeRaw","consumeChunk","trim","length","slice","enqueueEvent","stack","includes","error","drainEvents","type","messages","search_results","chat_id","turn_id","factual_consistency_score","generation_chunk","rendered_prompt","rephrased_query","raw","searchResults","chatId","generationChunk","renderedPrompt","rawType","ae","reranker_id","diversity_bias","oe","style","url_pattern","urlPattern","text_pattern","textPattern","streamQueryConfig","includeRawEvents","authToken","domain","search","lexicalInterpolation","customDimensions","semantics","offset","limit","contextConfiguration","reranker","generation","corpora","corpus_key","metadata_filter","lexical_interpolation","custom_dimensions","context_configuration","characters_before","charactersBefore","characters_after","charactersAfter","sentences_before","sentences_after","start_tag","end_tag","stream_response","promptName","maxUsedSearchResults","promptText","maxResponseCharacters","responseLanguage","modelParameters","i","citations","q","B","prompt_name","max_used_search_results","prompt_text","max_response_characters","response_language","model_parameters","max_tokens","maxTokens","temperature","frequency_penalty","frequencyPenalty","presence_penalty","presencePenalty","enable_factual_consistency_score","Authorization","G","DOMException","request"],"sources":["/Users/syedali/POC/Create UI Threadneedle/columbia-threadneedle-demo/node_modules/@vectara/stream-query-client/lib/index.js"],"sourcesContent":["\"use strict\";var U=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var V=Object.prototype.hasOwnProperty;var J=(e,t)=>{for(var s in t)U(e,s,{get:t[s],enumerable:!0})},j=(e,t,s,r)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let n of $(t))!V.call(e,n)&&n!==s&&U(e,n,{get:()=>t[n],enumerable:!(r=K(t,n))||r.enumerable});return e};var W=e=>j(U({},\"__esModule\",{value:!0}),e);var ie={};J(ie,{ApiV1:()=>O,ApiV2:()=>F,streamQueryV1:()=>M,streamQueryV2:()=>z});module.exports=W(ie);var O={};var F={};var A=\"%START_SNIPPET%\",w=\"%END_SNIPPET%\";var H=e=>{if(!e)return;let t=[],{response:s,document:r}=e;return s.forEach(n=>{let{documentIndex:u,text:m}=n,{pre:f,post:y,text:l}=Y(m),h=r[Number(u)],{id:v,metadata:x}=h,{source:E,url:b,title:a,metadata:I}=X(x);t.push({id:v,snippet:{pre:f,text:l,post:y},source:E,url:b,title:a,metadata:I})}),t},X=e=>{let t=Z(e);return{source:t.source,url:t.url,title:t.title||\"Untitled\",metadata:t}},Y=e=>{let[t,s]=e.indexOf(A)!==-1?e.split(A):[\"\",e],[r,n]=s.indexOf(w)!==-1?s.split(w):[s,\"\"];return{pre:t,post:n,text:r}},Z=e=>{let t={};return e.forEach(s=>{t[s.name]=s.value}),t};var L=(e,t)=>{e.split(`\n`).filter(r=>r!==\"\").forEach(t)};var D=\"https://api.vectara.io\";var N=async(e,t,s)=>{let r=new AbortController,n=await fetch(s,{method:\"POST\",headers:e,body:t,signal:r.signal});if(!n.ok)throw new Error(`Request failed (${n.statusText})`,{cause:n.status});if(!n.body)throw new Error(\"Response body does not exist\");return{stream:ee(n.body),cancelStream:()=>r.abort(),status:n.status,responseHeaders:n.headers}};async function*ee(e){let t=e.getReader(),s=new TextDecoder;for(;;){let{value:r,done:n}=await t.read();if(n)break;yield s.decode(r,{stream:!0})}}var M=async(e,t)=>{var h,v,x,E,b,a,I,C;let s={\"x-api-key\":e.apiKey,\"customer-id\":e.customerId,\"Content-Type\":\"application/json\"},r=(h=e.lambda)!=null?h:.025;r>1?r=1:r<0&&(r=0);let n=e.corpusIds.map(p=>({customerId:e.customerId,corpusId:p,lexicalInterpolationConfig:{lambda:r},metadataFilter:e.filter?`doc.source = '${e.filter}'`:void 0})),u=e.rerank?{rerankingConfig:{rerankerId:e.rerankerId,...e.rerankerId===272725718?{mmrConfig:{diversityBias:e.rerankDiversityBias}}:{}}}:{},m=JSON.stringify({query:[{query:e.queryValue,start:0,numResults:e.rerank?e.rerankNumResults:10,corpusKey:n,contextConfig:{sentencesBefore:(v=e.summaryNumSentences)!=null?v:2,sentencesAfter:(x=e.summaryNumSentences)!=null?x:2,startTag:A,endTag:w},summary:[{responseLang:e.language,debug:e.debug,maxSummarizedResults:e.summaryNumResults,summarizerPromptName:e.summaryPromptName,factualConsistencyScore:(E=e.enableFactualConsistencyScore)!=null?E:!1,chat:{store:(a=(b=e.chat)==null?void 0:b.store)!=null?a:!1,conversationId:(I=e.chat)==null?void 0:I.conversationId}}],...u}]}),f=(C=e.endpoint)!=null?C:`${D}/v1/stream-query`,{stream:y}=await N(s,m,f),l=\"\";for await(let p of y)try{L(p,g=>{var S,R,P;let o=JSON.parse(g);if(!o.result)return;let d={},T=te(e,o.result);T&&(d.summary=T);let k=re(e,o.result);k&&(d.chat=k);let c=se(o.result);c&&(d.factualConsistency=c);let _={references:H(o.result.responseSet),details:d,updatedText:ne(o.result,l),isDone:(R=(S=o.result.summary)==null?void 0:S.done)!=null?R:!1};l=(P=_.updatedText)!=null?P:\"\",t(_)})}catch(g){console.log(g)}},te=(e,t)=>{if(t.summary&&e.debug&&t.summary.prompt)return{prompt:t.summary.prompt}},re=(e,t)=>{var r;if(!((r=t.summary)!=null&&r.chat))return;let s={conversationId:t.summary.chat.conversationId,turnId:t.summary.chat.turnId};return e.debug&&t.summary.chat.rephrasedQuery&&(s.rephrasedQuery=t.summary.chat.rephrasedQuery),s},se=e=>{if(!(!e.summary||!e.summary.factualConsistency))return{score:e.summary.factualConsistency.score}},ne=(e,t)=>{if(e.summary)return`${t}${e.summary.text}`};var Q=class{constructor(t,s=!1,r=200){this.eventInProgress=\"\";this.updatedText=\"\";this.events=[],this.onStreamEvent=t,this.includeRaw=s,this.status=r}consumeChunk(t){t.split(`\n`).forEach(r=>{if(r.trim().length!==0&&r.indexOf(\"event:\")!==0){r.indexOf(\"data:\")===0?this.eventInProgress=r.slice(5,r.length):this.eventInProgress+=r;try{let n=JSON.parse(this.eventInProgress);this.enqueueEvent(n),this.eventInProgress=\"\"}catch(n){n.stack.includes(\"at JSON.parse\")||console.error(n)}}}),this.drainEvents()}enqueueEvent(t){let{type:s,messages:r,search_results:n,chat_id:u,turn_id:m,factual_consistency_score:f,generation_chunk:y,rendered_prompt:l,rephrased_query:h}=t;switch(s){case\"error\":this.events.push({type:\"error\",messages:r,...this.includeRaw&&{raw:t}});break;case\"search_results\":this.events.push({type:\"searchResults\",searchResults:n,...this.includeRaw&&{raw:t}});break;case\"chat_info\":this.events.push({type:\"chatInfo\",chatId:u,turnId:m,...this.includeRaw&&{raw:t}});break;case\"generation_chunk\":this.updatedText+=y,this.events.push({type:\"generationChunk\",updatedText:this.updatedText,generationChunk:y,...this.includeRaw&&{raw:t}});break;case\"generation_info\":this.events.push({type:\"generationInfo\",renderedPrompt:l,rephrasedQuery:h,...this.includeRaw&&{raw:t}});break;case\"generation_end\":this.events.push({type:\"generationEnd\",...this.includeRaw&&{raw:t}});break;case\"factual_consistency_score\":this.events.push({type:\"factualConsistencyScore\",factualConsistencyScore:f,...this.includeRaw&&{raw:t}});break;case\"end\":this.events.push({type:\"end\",...this.includeRaw&&{raw:t}});break;default:s?this.events.push({type:\"unexpectedEvent\",rawType:s,raw:t}):this.status!==200?this.events.push({type:\"requestError\",status:this.status,raw:t}):this.events.push({type:\"unexpectedError\",raw:t})}}drainEvents(){this.events.forEach(t=>{this.onStreamEvent(t)}),this.events=[]}};var ae=e=>{if(e){if(e.type===\"none\")return{type:e.type};if(e.type===\"customer_reranker\")return{type:e.type,reranker_id:e.rerankerId};if(e.type===\"mmr\")return{type:e.type,diversity_bias:e.diversityBias}}},oe=e=>{if(e){if(e.style===\"none\"||e.style===\"numeric\")return{style:e.style};if(e.style===\"html\"||e.style===\"markdown\")return{style:e.style,url_pattern:e.urlPattern,text_pattern:e.textPattern}}},z=async({streamQueryConfig:e,onStreamEvent:t,includeRawEvents:s=!1})=>{let{customerId:r,apiKey:n,authToken:u,domain:m,corpusKey:f,query:y,search:{metadataFilter:l,lexicalInterpolation:h,customDimensions:v,semantics:x,offset:E,limit:b,contextConfiguration:a,reranker:I},generation:C,chat:p}=e,g={query:y,search:{corpora:f.split(\",\").map(c=>({corpus_key:c,metadata_filter:l,lexical_interpolation:h,custom_dimensions:v,semantics:x})),offset:E,limit:b,context_configuration:{characters_before:a==null?void 0:a.charactersBefore,characters_after:a==null?void 0:a.charactersAfter,sentences_before:a==null?void 0:a.sentencesBefore,sentences_after:a==null?void 0:a.sentencesAfter,start_tag:a==null?void 0:a.startTag,end_tag:a==null?void 0:a.endTag},reranker:ae(I)},stream_response:!0};if(C){let{promptName:c,maxUsedSearchResults:_,promptText:S,maxResponseCharacters:R,responseLanguage:P,modelParameters:i,citations:q,enableFactualConsistencyScore:B}=C;g.generation={prompt_name:c,max_used_search_results:_,prompt_text:S,max_response_characters:R,response_language:P,model_parameters:i&&{max_tokens:i.maxTokens,temperature:i.temperature,frequency_penalty:i.frequencyPenalty,presence_penalty:i.presencePenalty},citations:oe(q),enable_factual_consistency_score:B}}p&&(g.chat={store:p.store});let o;p?p.conversationId?o=`/v2/chats/${p.conversationId}/turns`:o=\"/v2/chats\":o=\"/v2/query\";let d={\"customer-id\":r,\"Content-Type\":\"application/json\"};n&&(d[\"x-api-key\"]=n),u&&(d.Authorization=`Bearer ${u}`);let T=`${m!=null?m:D}${o}`,k={method:\"POST\",url:T,headers:d,body:g};try{let{cancelStream:c,stream:_,status:S,responseHeaders:R}=await N(d,JSON.stringify(g),T);return(async()=>{try{let i=new Q(t,s,S);for await(let q of _)try{i.consumeChunk(q)}catch(B){G(B,t)}}catch(i){i instanceof DOMException&&i.name==\"AbortError\"||G(i,t)}})(),{cancelStream:c,request:k,status:S,responseHeaders:R}}catch(c){G(c,t)}return{request:k}},G=(e,t)=>{if(e instanceof Error)t({type:\"genericError\",error:e});else throw e};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}